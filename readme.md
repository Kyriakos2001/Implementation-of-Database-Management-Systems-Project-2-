# README

## Δομές Δεδομένων (Structs)

### BPLUS_DATA_NODE

Αντιπροσωπεύει έναν κόμβο φύλλο στο B+ δένδρο:

- is_innernode: Δείκτης κατάστασης αν ο κόμβος είναι εσωτερικός (1) ή φύλλο (0).  
- no_of_records: Αριθμός εγγραφών (Record) που αποθηκεύονται στον κόμβο.  
- nextdatanode: Δείκτης στο επόμενο φύλλο κόμβο, βοηθώντας στην σειριακή περιήγηση όλων των εγγραφών.  
- parent: Δείκτης στον γονικό κόμβο.  
- allrecords[MAX_RECORDS_PER_BLOCK]: Πίνακας εγγραφών (Record) που αποθηκεύονται στον κόμβο.

### BPLUS_INDEX_NODE

Αντιπροσωπεύει έναν εσωτερικό κόμβο στο B+ δένδρο:

- is_innernode: Δείκτης κατάστασης αν ο κόμβος είναι εσωτερικός (1) ή φύλλο (0).  
- no_of_keys: Αριθμός κλειδιών (id) που αποθηκεύονται στον κόμβο.  
- previousblock: Δείκτης σε ένα block-παιδί, το οποίο περιέχει τιμές (keys) μικρότερες από το πρώτο κλειδί που είναι αποθηκευμένο στο `bplusstructure`. Ουσιαστικά, είναι ο αριστερός δείκτης που οδηγεί στο υποδένδρο με τα μικρότερα κλειδιά.  
- parent: Δείκτης στον γονικό κόμβο.  
- bplusstructure[MAX_POINTERS_PER_BLOCK]: Πίνακας από δομές `(id, blockno)`. Για κάθε εγγραφή `id` υπάρχει δείκτης `blockno` προς τον κόμβο που περιέχει τιμές μεγαλύτερες ή ίσες από το `id`. Έτσι ο κόμβος χωρίζεται σε περιοχές κλειδιών. 

## Λειτουργίες του B+ δένδρου

   Εισαγωγή (BP_InsertEntry):  
   Προσθήκη νέας εγγραφής με βάση το κλειδί της. Αν ο κόμβος φύλλου γεμίσει, γίνεται διαχωρισμός (split) ώστε το δένδρο να παραμένει ισορροπημένο.
   Αρχικά οι εγγραφές προστίθενται στη ρίζα και όταν γεμίσει η ρίζα μετατρέπεται σε index και δημιουργούνται παιδιά στη ρίζα που κρατάνε τις εγγραφές.
   Οι εγγραφές μπορούν να συνεχίσουν να προστίθενται μέχρι να γεμίσει από εγγραφές η ρίζα-ευρετήριο.

   Αναζήτηση (BP_GetEntry):  
   Εύρεση εγγραφής με βάση το `id`. Το δένδρο πλοηγείται από τη ρίζα προς τα φύλλα, ακολουθώντας τα κατάλληλα κλειδιά.

   Περιήγηση (BP_Print):  
   Παρέχεται δυνατότητα σειριακής ανάγνωσης όλων των block εγγραφών μέσω των δεικτών μεταξύ κόμβων φύλλων. Έτσι, μπορεί να γίνει εκτύπωση όλων των εγγραφών ώστε
   να ελεγχθεί ότι καταχωρήθηκαν επιτυχώς.

   Διαχείριση Ρίζας (create_new_root):  
   Σε περίπτωση διαχωρισμού του ριζικού κόμβου, δημιουργείται νέα ρίζα ώστε το δένδρο να παραμένει ισορροπημένο. Στον κώδικα που καταφέραμε να λειτουργήσει επιτυχώς,
   αυτό μπορεί να γίνει μόνο μία φορά (ώστε το μέγιστο βάθος δέντρου για το οποίο ο κώδικας λειτουργεί χωρίς σφάλματα είναι 1).

   Ενημέρωση Γονικών Κόμβων (insert_into_parent):  
   Μετά από διαχωρισμούς (split) κόμβων, οι σχέσεις γονέων-παιδιών ενημερώνονται ώστε να αντικατοπτρίζουν τη νέα δομή του δένδρου. Οι κόμβοι-παιδιά της ρίζας
   ενημερώνονται ώστε να παραμείνουν συνολικά οι εγγραφές ταξινομημένες σε αύξουσα σειρά.

## Σχετική Οργάνωση Αρχείων

- bp_main.c: Παραδείγματα εκτέλεσης, δοκιμές βασικών λειτουργιών (insert, search, print).  
- bp_file.c: Λειτουργίες δημιουργίας, ανοίγματος, κλεισίματος του αρχείου B+ δένδρου, και χειρισμός ρίζας.  
- bp_datanode.c: Λειτουργίες που αφορούν κόμβους φύλλων (data nodes).  
- bp_indexnode.c: Λειτουργίες που αφορούν εσωτερικούς κόμβους (index nodes).  
- record.c: Λειτουργίες για τη δημιουργία, εμφάνιση και διαχείριση των εγγραφών (Record).

Κάθε αρχείο περιέχει σχόλια και τεκμηρίωση των συναρτήσεων που υλοποιούνται σε αυτό.

## Οδηγίες Μεταγλώττισης και Εκτέλεσης

  Καθαρισμός:

   ```bash
   make clean
   ```

   Μεταγλώττιση με χρήση `make`:

   ```bash
   make build
   ```

   Εκτέλεση:

   ```bash
   make run
   ```

## Παραδείγματα και Δοκιμές

Το αρχείο `examples.txt` περιέχει ένα παράδειγμα εκτέλεσης: 

- Εισαγωγή 79 εγγραφών.  
- Έλεγχος περιήγησης του δένδρου (B+ Tree traversal) και εκτύπωσης όλων των εγγραφών.  
- Αναζήτηση κάθε εγγραφής για επιβεβαίωση ορθής εισαγωγής.

## Σημειώσεις Υλοποίησης

   Αρχείο Header: Το πρώτο block κάθε αρχείου χρησιμοποιείται εξ ολοκλήρου για μεταδεδομένα. Αυτό απλοποιεί τη διαχείριση και εναρμονίζεται με τις απαιτήσεις της εκφώνησης.  
   Μεταδεδομένα: Στο header του αρχείου αποθηκεύονται:  

   - Το βάθος του δένδρου.  
   - Ο αριθμός εγγραφών στο αρχείο.  
   - Ο αριθμός εγγραφών στο τελευταίο block.  
   - Ο μέγιστος αριθμός εγγραφών ανά block.  
   Διαχείριση Blocks: Κάθε block διαθέτει `block_info`, το οποίο περιέχει τον αριθμό εγγραφών στο block.  

## Ελλειψεις κώδικα

Δεν υλοποιούμε την αναδρομική συνάρτηση για να κάνει το split αφού γεμίσει η πρώτη ρίζα-ευρετήριο. Μπορούν να εισαχθούν εγγραφές και να ανακτηθούν επιτυχώς
μέχρι να γεμίσει ένα δέντρο που έχει βάθος ίσο με 1, όπου η ρίζα index node και όλα τα παιδιά της ως data nodes να γεμίσουν. Δεν υλοποιήθηκε επιτυχώς
η δυνατότητα να γίνει split στο index node.
